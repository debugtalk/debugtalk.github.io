<!doctype html><html lang=zh-cn itemscope itemtype=http://schema.org/WebPage>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title>HttpRunner 实现参数化数据驱动机制 - DebugTalk</title>
<meta name=renderer content="webkit">
<meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes">
<meta name=MobileOptimized content="width">
<meta name=HandheldFriendly content="true">
<meta name=applicable-device content="pc,mobile">
<meta name=theme-color content="#f8f5ec">
<meta name=msapplication-navbutton-color content="#f8f5ec">
<meta name=apple-mobile-web-app-capable content="yes">
<meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec">
<meta name=mobile-web-app-capable content="yes">
<meta name=author content="debugtalk">
<meta name=description content="从 1.1.0 版本开始，数据驱动机制进行了较大的优化和调整。 请参考：《HttpRunner 再议参数化数据驱动机制》 背景 在自动化测试中，经常会遇到如下场">
<meta name=keywords content="HttpRunner,Python,Go,博客,debugtalk,接口自动化测试,性能测试">
<meta name=generator content="Hugo 0.92.1">
<link rel=canonical href=https://debugtalk.github.io/post/httprunner-data-driven/>
<link rel=icon href=/favicon.ico>
<link rel=stylesheet href=/sass/jane.min.fa4b2b9f31b5c6d0b683db81157a9226e17b06e61911791ab547242a4a0556f2.css integrity="sha256-+ksrnzG1xtC2g9uBFXqSJuF7BuYZEXkatUckKkoFVvI=" media=screen crossorigin=anonymous>
<link rel=stylesheet href=/css/custom.css>
<meta property="og:title" content="HttpRunner 实现参数化数据驱动机制">
<meta property="og:description" content="从 1.1.0 版本开始，数据驱动机制进行了较大的优化和调整。 请参考：《HttpRunner 再议参数化数据驱动机制》 背景 在自动化测试中，经常会遇到如下场">
<meta property="og:type" content="article">
<meta property="og:url" content="https://debugtalk.github.io/post/httprunner-data-driven/"><meta property="article:section" content="post">
<meta property="article:published_time" content="2018-02-16T00:00:00+00:00">
<meta property="article:modified_time" content="2018-02-16T00:00:00+00:00">
<meta itemprop=name content="HttpRunner 实现参数化数据驱动机制">
<meta itemprop=description content="从 1.1.0 版本开始，数据驱动机制进行了较大的优化和调整。 请参考：《HttpRunner 再议参数化数据驱动机制》 背景 在自动化测试中，经常会遇到如下场"><meta itemprop=datePublished content="2018-02-16T00:00:00+00:00">
<meta itemprop=dateModified content="2018-02-16T00:00:00+00:00">
<meta itemprop=wordCount content="5427">
<meta itemprop=keywords content="HttpRunner,"><meta name=twitter:card content="summary">
<meta name=twitter:title content="HttpRunner 实现参数化数据驱动机制">
<meta name=twitter:description content="从 1.1.0 版本开始，数据驱动机制进行了较大的优化和调整。 请参考：《HttpRunner 再议参数化数据驱动机制》 背景 在自动化测试中，经常会遇到如下场"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]-->
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-81639610-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body>
<div id=mobile-navbar class=mobile-navbar>
<div class=mobile-header-logo>
<a href=/ class=logo>DebugTalk</a>
</div>
<div class=mobile-navbar-icon>
<span></span>
<span></span>
<span></span>
</div>
</div>
<nav id=mobile-menu class="mobile-menu slideout-menu">
<ul class=mobile-menu-list>
<li class=mobile-menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/>主页</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/post/>归档</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/tags/>标签</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/categories/>分类</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/about/>关于</a>
</li><li class=mobile-menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/index.xml>订阅</a>
</li>
</ul>
</nav>
<link rel=stylesheet href=/lib/photoswipe/photoswipe.min.css>
<link rel=stylesheet href=/lib/photoswipe/default-skin/default-skin.min.css>
<div class=pswp tabindex=-1 role=dialog aria-hidden=true>
<div class=pswp__bg></div>
<div class=pswp__scroll-wrap>
<div class=pswp__container>
<div class=pswp__item></div>
<div class=pswp__item></div>
<div class=pswp__item></div>
</div>
<div class="pswp__ui pswp__ui--hidden">
<div class=pswp__top-bar>
<div class=pswp__counter></div>
<button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
<div class=pswp__preloader>
<div class=pswp__preloader__icn>
<div class=pswp__preloader__cut>
<div class=pswp__preloader__donut></div>
</div>
</div>
</div>
</div>
<div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
<div class=pswp__share-tooltip></div>
</div>
<button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
</button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
</button>
<div class=pswp__caption>
<div class=pswp__caption__center></div>
</div>
</div>
</div>
</div>
<header id=header class="header container">
<div class=logo-wrapper>
<a href=/ class=logo>
DebugTalk
</a>
</div>
<nav class=site-navbar>
<ul id=menu class=menu>
<li class=menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/>主页</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/post/>归档</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/tags/>标签</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/categories/>分类</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/about/>关于</a>
</li>
<li class=menu-item>
<a class=menu-item-link href=https://debugtalk.github.io/index.xml>订阅</a>
</li>
</ul>
</nav>
</header>
<div id=mobile-panel>
<main id=main class="main bg-llight">
<div class=content-wrapper>
<div id=content class="content container">
<article class="post bg-white">
<header class=post-header>
<h1 class=post-title>HttpRunner 实现参数化数据驱动机制</h1>
<div class=post-meta>
<time datetime=2018-02-16 class=post-time>
2018-02-16
</time>
<div class=post-category>
<a href=https://debugtalk.github.io/categories/OpenSource/> OpenSource </a>
</div>
<span class=more-meta> 约 5427 字 </span>
<span class=more-meta> 预计阅读 11 分钟 </span>
<span id=busuanzi_container_page_pv>
| 阅读 <span id=busuanzi_value_page_pv></span>
</span>
</div>
</header>
<div class=post-toc id=post-toc>
<h2 class=post-toc-title>文章目录</h2>
<div class=post-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#背景>背景</a></li>
<li><a href=#借鉴-loadrunner-的数据参数化>借鉴 LoadRunner 的数据参数化</a></li>
<li><a href=#设计思路演变历程>设计思路演变历程</a></li>
<li><a href=#开发实现>开发实现</a>
<ul>
<li><a href=#数据源格式约定>数据源格式约定</a></li>
<li><a href=#csv-解析器>csv 解析器</a></li>
<li><a href=#多个参数的组合>多个参数的组合</a></li>
<li><a href=#参数化数据驱动>参数化数据驱动</a></li>
</ul>
</li>
<li><a href=#效果展示>效果展示</a></li>
</ul>
</nav>
</div>
</div>
<div class=post-content>
<blockquote>
<p>从 1.1.0 版本开始，数据驱动机制进行了较大的优化和调整。
请参考：<a href=https://debugtalk.com/post/httprunner-data-driven/>《HttpRunner 再议参数化数据驱动机制》</a></p>
</blockquote>
<h2 id=背景>背景</h2>
<p>在自动化测试中，经常会遇到如下场景：</p>
<blockquote>
<p>1、测试搜索功能，只有一个搜索输入框，但有10种不同类型的搜索关键字；
2、测试账号登录功能，需要输入用户名和密码，按照等价类划分后有20种组合情况。</p>
</blockquote>
<p>这里只是随意找了两个典型的例子，相信大家都有遇到过很多类似的场景。总结下来，就是在我们的自动化测试脚本中存在参数，并且我们需要采用不同的参数去运行。</p>
<p>经过概括，参数基本上分为两种类型：</p>
<ul>
<li>单个独立参数：例如前面的第一种场景，我们只需要变换搜索关键字这一个参数</li>
<li>多个具有关联性的参数：例如前面的第二种场景，我们需要变换用户名和密码两个参数，并且这两个参数需要关联组合</li>
</ul>
<p>然后，对于参数而言，我们可能具有一个参数列表，在脚本运行时需要按照不同的规则去取值，例如顺序取值、随机取值、循环取值等等。</p>
<p>对于这一块儿，没有太多新的概念，这就是典型的参数化和数据驱动。遗憾的是，当前<code>HttpRunner</code>并未支持该功能特性。</p>
<p>考虑到该需求的普遍性，并且近期提到该需求的的人也越来越多（<a href=https://github.com/HttpRunner/HttpRunner/issues/74>issue #74</a>, <a href=https://github.com/HttpRunner/HttpRunner/issues/87>issue #87</a>, <a href=https://github.com/HttpRunner/HttpRunner/issues/88>issue #88</a>, <a href=https://github.com/HttpRunner/HttpRunner/issues/97>issue #97</a>），因此趁着春节假期的空闲时间，决定优先实现下。</p>
<p>经过前面的场景分析，我们的目标已经很明确了，接下来就是如何实现的问题了。</p>
<h2 id=借鉴-loadrunner-的数据参数化>借鉴 LoadRunner 的数据参数化</h2>
<p>要造一个轮子，最好是先看下现有知名轮子的实现机制。之前有用过一段时间的 LoadRunner，对其参数化机制印象蛮深的，虽然它是性能测试工具，但在脚本参数化方面是通用的。</p>
<p>我们先看下在 LoadRunner 中是如何实现参数化的。</p>
<p>在 LoadRunner 中，可以在脚本中创建一个参数，然后参数会保存到一个<code>.dat</code>的文件中，例如下图中的<code>psd.dat</code>。</p>
<p><img src=/images/loadrunner-parameterize.jpg alt></p>
<p>在<code>.dat</code>文件中，是采用表格的形式来存储参数值，结构与<code>CSV</code>基本一致。</p>
<p>对于单个独立参数，可以将参数列表保存在一个单独的<code>.dat</code>文件中，第一行为参数名称，后续每一行为一个参数值。例如本文背景介绍中的第一类场景，数据存储形式如下所示：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>Keyword
hello
world
debugtalk
</code></pre></td></tr></table>
</div>
</div><p>然后对于参数的取值方式，可以通过<code>Select next row</code>和<code>Update value on</code>进行配置。</p>
<p><code>Select next row</code>的可选方式有：</p>
<ul>
<li>Sequential：顺序取值</li>
<li>Random：随机取值</li>
<li>Unique：为每个虚拟用户分配一条唯一的数据</li>
</ul>
<p><code>Update value on</code>的可选方式有：</p>
<ul>
<li>Each iteration：每次脚本迭代时更新参数值</li>
<li>Each occurrence：每次出现参数引用时更新参数值</li>
<li>Once：每条数据只能使用一次</li>
</ul>
<p>而且，可以通过对这两种方式进行组合，配制出9种参数化方式。</p>
<p>另外，因为 LoadRunner 本身是性能测试工具，具有长时间运行的需求，假如<code>Select next row</code>选择为<code>Unique</code>，同时<code>Update value on</code>设置为<code>Each iteration</code>，那么就会涉及到参数用完的情况。在该种情况下，可通过<code>When out of value</code>配置项实现如下选择：</p>
<ul>
<li>Abort vuser：当超出时终止脚本</li>
<li>Continue in a cyclic manner：当超出时回到列表头再次取值</li>
<li>Continue with last value：使用参数表中的最后一个值</li>
</ul>
<p>对于多个具有关联性的参数，可以将关联参数列表保存在一个<code>.dat</code>文件中，第一行为参数名称，后续每一行为一个参数值，参数之间采用逗号进行分隔。例如本文背景介绍中的第二类场景，数据存储形式如下所示：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>UserName,Password
test1,111111
test2,222222
test3,333333
</code></pre></td></tr></table>
</div>
</div><p>对于参数的取值方式，与上面单个独立参数的取值方式基本相同。差异在于，我们可以只配置一个参数（例如<code>UserName</code>）的取值方式，然后其它参数（例如<code>Password</code>）的取值方式选择为<code>same line as UserName</code>。如此一来，我们就可以保证参数化时的数据关联性。</p>
<p>LoadRunner 的参数化机制就回顾到这里，可以看出，其功能还是很强大的，使用也十分灵活。</p>
<h2 id=设计思路演变历程>设计思路演变历程</h2>
<p>现在再回到我们的 HttpRunner，要如何来实现参数化机制呢？</p>
<p>因为 LoadRunner 的参数化机制比较完善，用户群体也很大，因此我在脑海里最先冒出的想法就是照抄 LoadRunner，将 LoadRunner 在 GUI 中配置的内容在 HttpRunner 中通过<code>YAML/JSON</code>来进行配置。</p>
<p>按照这个思路，在 HttpRunner 的 config 中，就要有一块儿地方用来进行参数化配置，暂且设定为<code>parameters</code>吧。然后，对于每一个参数，其参数列表要单独存放在文件中，考虑到LoadRunner中的<code>.dat</code>文件基本就是<code>CSV</code>格式，因此可以约定采用大众更熟悉的<code>.csv</code>文件来存储参数；在脚本中，要指定参数变量从哪个文件中取值，那么就需要设定一个<code>parameter_file</code>，用于指定对应的参数文件路径。接下来，要实现取值规则的配置，例如是顺序取值还是随机取值，那么就需要设定<code>select_next_row</code>和<code>update_value_on</code>。</p>
<p>根据该设想，在<code>YAML</code>测试用例文件中，数据参数化将描述为如下形式：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>config</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;demo for data driven.&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>parameters</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=nt>Keyword</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>parameter_file</span><span class=p>:</span><span class=w> </span><span class=l>keywords.csv</span><span class=w>
</span><span class=w>            </span><span class=nt>select_next_row</span><span class=p>:</span><span class=w> </span><span class=l>Random</span><span class=w>
</span><span class=w>            </span><span class=nt>update_value_on</span><span class=p>:</span><span class=w> </span><span class=l>EachIteration</span><span class=w>
</span><span class=w>        </span>- <span class=nt>UserName</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>parameter_file</span><span class=p>:</span><span class=w> </span><span class=l>account.csv</span><span class=w>
</span><span class=w>            </span><span class=nt>select_next_row</span><span class=p>:</span><span class=w> </span><span class=l>Sequential</span><span class=w>
</span><span class=w>            </span><span class=nt>update_value_on</span><span class=p>:</span><span class=w> </span><span class=l>EachIteration</span><span class=w>
</span><span class=w>        </span>- <span class=nt>Password</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>parameter_file</span><span class=p>:</span><span class=w> </span><span class=l>account.csv</span><span class=w>
</span><span class=w>            </span><span class=nt>select_next_row</span><span class=p>:</span><span class=w> </span><span class=l>same line as UserName</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>这个想法基本可行，但就是感觉配置项有些繁琐，我们可以尝试再对其进行简化。</p>
<p>首先，比较明显的，针对每个参数都要配置<code>select_next_row</code>和<code>update_value_on</code>，虽然从功能上来说比较丰富，但是对于用户来说，这些功能并不都是必须的。特别是<code>update_value_on</code>这个参数，绝大多数情况下我们的需求应该都是采用<code>Each iteration</code>，即每次脚本再次运行时更新参数值。因此，我们可以去除<code>update_value_on</code>这个配置项，默认都是采用<code>Each iteration</code>的方式。</p>
<p>经过第一轮简化，配置描述方式变为如下形式：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>config</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;demo for data driven.&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>parameters</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=nt>Keyword</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>parameter_file</span><span class=p>:</span><span class=w> </span><span class=l>keywords.csv</span><span class=w>
</span><span class=w>            </span><span class=nt>select_next_row</span><span class=p>:</span><span class=w> </span><span class=l>Random</span><span class=w>
</span><span class=w>        </span>- <span class=nt>UserName</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>parameter_file</span><span class=p>:</span><span class=w> </span><span class=l>account.csv</span><span class=w>
</span><span class=w>            </span><span class=nt>select_next_row</span><span class=p>:</span><span class=w> </span><span class=l>Sequential</span><span class=w>
</span><span class=w>        </span>- <span class=nt>Password</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>parameter_file</span><span class=p>:</span><span class=w> </span><span class=l>account.csv</span><span class=w>
</span><span class=w>            </span><span class=nt>select_next_row</span><span class=p>:</span><span class=w> </span><span class=l>same line as UserName</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>然后，我们可以看到<code>UserName</code>和<code>Password</code>这两个参数，它们有关联性，但却各自单独进行了配置；而且对于有关联性的参数，除了需要对第一个参数配置取值方式外，其它参数的<code>select_next_row</code>应该总是为<code>same line as XXX</code>，这样描述就显得比较累赘了。</p>
<p>既然是有关联性的参数，那就放在一起吧，参数名称可以采用约定的符号进行分离。考虑到参数变量名称通常包含字母、数字和下划线，同时要兼顾<code>YAML/JSON</code>中对字符的限制，因此选择短横线（<code>-</code>）作为分隔符吧。</p>
<p>经过第二轮简化，配置描述方式变为如下形式：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>config</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;demo for data driven.&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>parameters</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=nt>Keyword</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>parameter_file</span><span class=p>:</span><span class=w> </span><span class=l>keywords.csv</span><span class=w>
</span><span class=w>            </span><span class=nt>select_next_row</span><span class=p>:</span><span class=w> </span><span class=l>Random</span><span class=w>
</span><span class=w>        </span>- <span class=nt>UserName-Password</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>parameter_file</span><span class=p>:</span><span class=w> </span><span class=l>account.csv</span><span class=w>
</span><span class=w>            </span><span class=nt>select_next_row</span><span class=p>:</span><span class=w> </span><span class=l>Sequential</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>接着，我们再看下<code>parameter_file</code>参数。因为我们测试用例中的参数名称必须与数据源进行绑定，因此这一项信息是不可少的。但是在描述形式上，还是会感觉有些繁琐。再一想，既然我们本来就要指定参数名称，那何必不将参数名称约定为文件名称呢？</p>
<p>例如，对于参数<code>Keyword</code>，我们可以将其数据源文件名称约定为<code>Keyword.csv</code>；对于参数<code>UserName</code>和<code>Password</code>，我们可以将其数据源文件名称约定为<code>UserName-Password.csv</code>；然后，再约定数据源文件需要与当前<code>YAML/JSON</code>测试用例文件放置在同一个目录。</p>
<p>经过第三轮简化，配置描述方式变为如下形式：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>config</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;demo for data driven.&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>parameters</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=nt>Keyword</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>select_next_row</span><span class=p>:</span><span class=w> </span><span class=l>Random</span><span class=w>
</span><span class=w>        </span>- <span class=nt>UserName-Password</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>select_next_row</span><span class=p>:</span><span class=w> </span><span class=l>Sequential</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>同时该用例文件同级目录下的数据源文件名称为<code>Keyword.csv</code>和<code>UserName-Password.csv</code>。</p>
<p>现在，我们就只剩下<code>select_next_row</code>一个配置项了。既然是只剩一项，那就也省略配置项名称吧。</p>
<p>最终，我们的配置描述方式变为：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>config</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;demo for data driven.&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>parameters</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=nt>Keyword</span><span class=p>:</span><span class=w> </span><span class=l>Random</span><span class=w>
</span><span class=w>        </span>- <span class=nt>UserName-Password</span><span class=p>:</span><span class=w> </span><span class=l>Sequential</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>不过，我们还忽略了一个信息，那就是脚本的运行次数。假如参数取值都是采用<code>Sequential</code>的方式，那么我们可以将不同组参数进行笛卡尔积的组合，这是一个有限次数，可以作为自动化测试运行终止的条件；但如果参数取值采用<code>Random</code>的方式，即每次都是在参数列表里面随机取值，那么就不好界定自动化测试运行终止的条件了，我们只能手动进行终止，或者事先指定运行的总次数，不管是采用哪种方式，都会比较麻烦。</p>
<p>针对参数取值采用<code>Random</code>方式的这个问题，我们不妨换个思路。从数据驱动的角度来看，我们期望在自动化测试时能遍历数据源文件中的所有数据，那么重复采用相同参数进行测试的意义就不大了。因此，在选择<code>Random</code>的取值方式时，我们可以先将参数列表进行乱序排序，然后采用顺序的方式进行遍历；对于存在多组参数的情况，也可以实现乱序排序后再进行笛卡尔积的组合方式了。</p>
<p>到此为止，我们的参数化配置方式应该算是十分简洁了，而且在功能上也能满足常规参数化的配置需求。</p>
<p>最后，我们再回过头来看脚本参数化设计思路的演变历程，基本上都可以概括为<code>约定大于配置</code>，这的确也是<code>HttpRunner</code>崇尚和遵循的准则。</p>
<h2 id=开发实现>开发实现</h2>
<p>设计思路理顺了，实现起来就比较简单了，点击此处查看<a href=https://github.com/HttpRunner/HttpRunner/commit/f8569aad914d4fe47ec24ac2e2e472b7b93c310d>相关代码</a>，就会发现实际的代码量并不多。</p>
<p>在这里我就只挑几个典型的点讲下。</p>
<h3 id=数据源格式约定>数据源格式约定</h3>
<p>既然是参数化，那么肯定会存在数据源的问题，我们约定采用<code>.csv</code>文件格式来存储参数列表。同时，在同一个测试场景中可能会存在多个参数的情况，为了降低问题的复杂度，我们可以约定独立参数存放在独立的<code>.csv</code>文件中，多个具有关联性的参数存放在一个<code>.csv</code>文件中。另外，我们同时约定在<code>.csv</code>文件中的第一行必须为参数名称，并且要与文件名保持一致；从第二行开始为参数值，每个值占一行。</p>
<p>例如，<code>keyword</code>这种独立的参数就可以存放在<code>keyword.csv</code>中，内容形式如下：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>keyword
hello
world
debugtalk
</code></pre></td></tr></table>
</div>
</div><p><code>username</code>和<code>password</code>这种具有关联性的参数就可以存放在<code>username-password.csv</code>中，内容形式如下：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>username,password
test1,111111
test2,222222
test3,333333
</code></pre></td></tr></table>
</div>
</div><h3 id=csv-解析器>csv 解析器</h3>
<p>数据源的格式约定好了，我们要想进行读取，那么就得有一个对应的解析器。因为我们后续想要遍历每一行数据，并且还会涉及到多个参数进行组合的情况，因此我们希望解析出来的每一行数据应该同时包含参数名称和参数值。</p>
<p>于是，我们的数据结构就约定采用<code>list of dict</code>的形式。即每一个<code>.csv</code>文件解析后会得到一个列表（list），而列表中的每一个元素为一个字典结构（dict），对应着一行数据的参数名称和参数值。具体实现的代码函数为<a href=https://github.com/HttpRunner/HttpRunner/commit/f8569aad914d4fe47ec24ac2e2e472b7b93c310d#diff-1ef6376047562e36a304745bca9ade9aR47><code>_load_csv_file</code></a>。</p>
<p>例如，上面的<code>username-password.csv</code>经过解析，会生成如下形式的数据结构。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=p>[</span>
    <span class=p>{</span><span class=err>&#39;username&#39;:</span> <span class=err>&#39;test1&#39;,</span> <span class=err>&#39;password&#39;:</span> <span class=err>&#39;111111&#39;</span><span class=p>},</span>
    <span class=p>{</span><span class=err>&#39;username&#39;:</span> <span class=err>&#39;test2&#39;,</span> <span class=err>&#39;password&#39;:</span> <span class=err>&#39;222222&#39;</span><span class=p>},</span>
    <span class=p>{</span><span class=err>&#39;username&#39;:</span> <span class=err>&#39;test3&#39;,</span> <span class=err>&#39;password&#39;:</span> <span class=err>&#39;333333&#39;</span><span class=p>}</span>
<span class=p>]</span>
</code></pre></td></tr></table>
</div>
</div><p>这里还会涉及到一个问题，就是参数取值顺序。</p>
<p>在<code>YAML/JSON</code>测试用例中，我们会配置参数的取值顺序，是要顺序取值（<code>Sequential</code>）还是乱序随机取值（<code>Random</code>）。对于顺序的情况没啥好说的，默认从<code>.csv</code>文件中读取出的内容就是顺序的；对于随机取值，更确切地说，应该是乱序取值，我们需要进行一次乱序排序，实现起来也很简单，使用<code>random.shuffle</code>函数即可。</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=k>if</span> <span class=n>fetch_method</span><span class=o>.</span><span class=n>lower</span><span class=p>()</span> <span class=o>==</span> <span class=s2>&#34;random&#34;</span><span class=p>:</span>
    <span class=n>random</span><span class=o>.</span><span class=n>shuffle</span><span class=p>(</span><span class=n>csv_content_list</span><span class=p>)</span>
</code></pre></td></tr></table>
</div>
</div><h3 id=多个参数的组合>多个参数的组合</h3>
<p>然后，对于多个参数的情况，为了组合出所有可能的情况，我们就需要用到笛卡尔积的概念。直接看例子可能会更好理解些。</p>
<p>例如我们在用例场景中具有三个参数，<code>a</code>为独立参数，参数列表为[1, 2]；<code>x</code>和<code>y</code>为关联参数，参数列表为[[111,112], [121,122]]；经过解析后，得到的数据分别为：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>a:
[{&#34;a&#34;: 1}, {&#34;a&#34;: 2}]

x &amp; y:
[
    {&#34;x&#34;: 111, &#34;y&#34;: 112},
    {&#34;x&#34;: 121, &#34;y&#34;: 122}
]
</code></pre></td></tr></table>
</div>
</div><p>那么经过笛卡尔积，就可以组合出4种情况，组合后的结果应该为：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=p>[</span>
    <span class=p>{</span><span class=err>&#39;a&#39;:</span> <span class=err>1,</span> <span class=err>&#39;x&#39;:</span> <span class=err>111,</span> <span class=err>&#39;y&#39;:</span> <span class=err>112</span><span class=p>},</span>
    <span class=p>{</span><span class=err>&#39;a&#39;:</span> <span class=err>1,</span> <span class=err>&#39;x&#39;:</span> <span class=err>121,</span> <span class=err>&#39;y&#39;:</span> <span class=err>122</span><span class=p>},</span>
    <span class=p>{</span><span class=err>&#39;a&#39;:</span> <span class=err>2,</span> <span class=err>&#39;x&#39;:</span> <span class=err>111,</span> <span class=err>&#39;y&#39;:</span> <span class=err>112</span><span class=p>},</span>
    <span class=p>{</span><span class=err>&#39;a&#39;:</span> <span class=err>2,</span> <span class=err>&#39;x&#39;:</span> <span class=err>121,</span> <span class=err>&#39;y&#39;:</span> <span class=err>122</span><span class=p>}</span>
<span class=p>]</span>
</code></pre></td></tr></table>
</div>
</div><p>这里需要强调的是，多个参数经过笛卡尔积运算转换后，仍然是<code>list of dict</code>的数据结构，列表中的每一个字典（dict）代表着参数的一种组合情况。</p>
<h3 id=参数化数据驱动>参数化数据驱动</h3>
<p>现在，我们已经实现了在<code>YAML/JSON</code>测试用例文件中对参数进行配置，从<code>.csv</code>数据源文件中解析出参数列表，并且生成所有可能的组合情况。最后还差一步，就是如何使用参数值来驱动测试用例的执行。</p>
<p>听上去很高大上，但实际却异常简单，直接对照着<a href=https://github.com/HttpRunner/HttpRunner/commit/f8569aad914d4fe47ec24ac2e2e472b7b93c310d#diff-fe4aef5754006b3e9100eb41eb3ca28cR57>代码</a>来说吧。</p>
<p><img src=/images/httprunner-parameterize.jpg alt></p>
<p>对于每一组参数组合情况来说，我们完全可以将其视为当前用例集运行时定义的变量值。而在 HttpRunner 中每一次运行测试用例集的时候都需要对<code>runner.Runner</code>做一次初始化，里面会用到定义的变量（即<code>config_dict["variables"]</code>），那么，我们完全可以在每次初始化的时候将组合好的参数作为变量传进去，假如存在同名的变量，就进行覆盖。</p>
<p>这样一来，我们就可以使用所有的参数组合情况来依次驱动测试用例的执行，并且每次执行时都采用了不同的参数，从而也就实现了参数化数据驱动的目的。</p>
<h2 id=效果展示>效果展示</h2>
<p>最后我们再来看下实际的运行效果吧。</p>
<p>假设我们有一个获取token的接口，我们需要使用 user_agent 和 app_version 这两个参数来进行参数化数据驱动。</p>
<p>YAML 测试用例的描述形式如下所示：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml>- <span class=nt>config</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=s2>&#34;user management testset.&#34;</span><span class=w>
</span><span class=w>    </span><span class=nt>parameters</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=nt>user_agent</span><span class=p>:</span><span class=w> </span><span class=l>Random</span><span class=w>
</span><span class=w>        </span>- <span class=nt>app_version</span><span class=p>:</span><span class=w> </span><span class=l>Sequential</span><span class=w>
</span><span class=w>    </span><span class=nt>variables</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=nt>user_agent</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;iOS/10.3&#39;</span><span class=w>
</span><span class=w>        </span>- <span class=nt>device_sn</span><span class=p>:</span><span class=w> </span><span class=l>${gen_random_string(15)}</span><span class=w>
</span><span class=w>        </span>- <span class=nt>os_platform</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;ios&#39;</span><span class=w>
</span><span class=w>        </span>- <span class=nt>app_version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;2.8.6&#39;</span><span class=w>
</span><span class=w>    </span><span class=nt>request</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=nt>base_url</span><span class=p>:</span><span class=w> </span><span class=l>$BASE_URL</span><span class=w>
</span><span class=w>        </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span><span class=w>            </span><span class=nt>Content-Type</span><span class=p>:</span><span class=w> </span><span class=l>application/json</span><span class=w>
</span><span class=w>            </span><span class=nt>device_sn</span><span class=p>:</span><span class=w> </span><span class=l>$device_sn</span><span class=w>
</span><span class=w>
</span><span class=w></span>- <span class=nt>test</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>get token with $user_agent and $app_version</span><span class=w>
</span><span class=w>    </span><span class=nt>api</span><span class=p>:</span><span class=w> </span><span class=l>get_token($user_agent, $device_sn, $os_platform, $app_version)</span><span class=w>
</span><span class=w>    </span><span class=nt>extract</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=nt>token</span><span class=p>:</span><span class=w> </span><span class=l>content.token</span><span class=w>
</span><span class=w>    </span><span class=nt>validate</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- <span class=nt>&#34;eq&#34;: </span><span class=p>[</span><span class=s2>&#34;status_code&#34;</span><span class=p>,</span><span class=w> </span><span class=m>200</span><span class=p>]</span><span class=w>
</span><span class=w>        </span>- <span class=nt>&#34;len_eq&#34;: </span><span class=p>[</span><span class=s2>&#34;content.token&#34;</span><span class=p>,</span><span class=w> </span><span class=m>16</span><span class=p>]</span><span class=w>
</span></code></pre></td></tr></table>
</div>
</div><p>其中，user_agent 和 app_version 的数据源列表分别为：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>user_agent
iOS/10.1
iOS/10.2
iOS/10.3
</code></pre></td></tr></table>
</div>
</div><div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>app_version
2.8.5
2.8.6
</code></pre></td></tr></table>
</div>
</div><p>那么，经过笛卡尔积组合，应该总共有6种参数组合情况，并且 user_agent 为乱序取值，app_version 为顺序取值。</p>
<p>最终的测试结果如下所示：</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback>$ hrun tests/data/demo_parameters.yml

Running tests...
----------------------------------------------------------------------
 get token with iOS/10.2 and 2.8.5 ... INFO:root: Start to POST http://127.0.0.1:5000/api/get-token
INFO:root: status_code: 200, response_time: 13 ms, response_length: 46 bytes
OK (0.014845)s
 get token with iOS/10.2 and 2.8.6 ... INFO:root: Start to POST http://127.0.0.1:5000/api/get-token
INFO:root: status_code: 200, response_time: 2 ms, response_length: 46 bytes
OK (0.003909)s
 get token with iOS/10.1 and 2.8.5 ... INFO:root: Start to POST http://127.0.0.1:5000/api/get-token
INFO:root: status_code: 200, response_time: 3 ms, response_length: 46 bytes
OK (0.004090)s
 get token with iOS/10.1 and 2.8.6 ... INFO:root: Start to POST http://127.0.0.1:5000/api/get-token
INFO:root: status_code: 200, response_time: 5 ms, response_length: 46 bytes
OK (0.006673)s
 get token with iOS/10.3 and 2.8.5 ... INFO:root: Start to POST http://127.0.0.1:5000/api/get-token
INFO:root: status_code: 200, response_time: 3 ms, response_length: 46 bytes
OK (0.004775)s
 get token with iOS/10.3 and 2.8.6 ... INFO:root: Start to POST http://127.0.0.1:5000/api/get-token
INFO:root: status_code: 200, response_time: 3 ms, response_length: 46 bytes
OK (0.004846)s
----------------------------------------------------------------------
Ran 6 tests in 0.046s
</code></pre></td></tr></table>
</div>
</div><p>至此，我们就已经实现了参数化数据驱动的需求。对于测试用例中参数的描述形式，大家要是发现还有更加简洁优雅的方式，欢迎反馈给我。</p>
<p>最后，本文发表于 2018 年大年初一，祝大家新年快乐，狗年旺旺旺！</p>
</div>
<div class=post-copyright>
<p class=copyright-item>
<span class=item-title>文章作者</span>
<span class=item-content>debugtalk</span>
</p>
<p class=copyright-item>
<span class=item-title>上次更新</span>
<span class=item-content>
2018-02-16
</span>
</p>
<p class=copyright-item>
<span class=item-title>许可协议</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span>
</p>
</div>
<footer class=post-footer>
<div class=post-tags>
<a href=https://debugtalk.github.io/tags/HttpRunner/>HttpRunner</a>
</div>
<nav class=post-nav>
<a class=prev href=/post/test-dev-in-dji/>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417l277.93508-310.326815c11.338233-12.190647 11.035334-32.285311-.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"/></svg>
</i>
<span class="prev-text nav-default">在大疆做测试开发是一种什么体验？</span>
<span class="prev-text nav-mobile">上一篇</span>
</a>
<a class=next href=/post/HttpRunner-skip-feature/>
<span class="next-text nav-default">HttpRunner 通过 skip 机制实现对测试用例的分组执行控制</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697c-11.777231-11.500939-30.216186-10.304694-41.178865 2.712784z"/></svg>
</i>
</a>
</nav>
</footer>
</article>
<div class="post bg-white">
<script src=https://utteranc.es/client.js repo=debugtalk/blog issue-term=pathname theme=github-light crossorigin=anonymous async></script>
</div>
<div class=disqus-comment>
<div class=disqus-button id=load_disqus onclick=load_disqus()>
显示 Disqus 评论
</div>
<div id=disqus_thread></div>
<script type=text/javascript>var disqus_config=function(){this.page.url="https://debugtalk.github.io/post/httprunner-data-driven/"};function load_disqus(){var a,b;if(window.location.hostname==='localhost')return;a=document.createElement('script'),a.type='text/javascript',a.async=!0,b='debugtalk',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a),$('#load_disqus').remove()}</script>
<noscript>Please enable JavaScript to view the
<a href=http://disqus.com/?ref_noscript>comments powered by Disqus.</a>
</noscript>
</div>
</div>
</div>
</main>
<footer id=footer class=footer>
<div class=icon-links>
<a href=mailto:mail@debugtalk.com rel="me noopener" class=iconfont title=email><svg class="icon" viewBox="0 0 1451 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z"/></svg>
</a>
<a href=https://github.com/debugtalk rel="me noopener" class=iconfont title=github target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M512 12.672c-282.88.0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667.0-12.16-.426667-44.373333-.64-87.04C242.005334 929.664 211.968 830.08 211.968 830.08 188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333.0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333.0.0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667.0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72.0 68.522667-.64 123.562667-.64 140.202666.0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"/></svg>
</a>
<a href=https://debugtalk.github.io/index.xml rel="noopener alternate" type=application/rss+xml class=iconfont title=rss target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><path d="M819.157333 1024C819.157333 574.592 449.408 204.8.0 204.8V0c561.706667.0 1024 462.293333 1024 1024H819.157333zM140.416 743.04a140.8 140.8.0 01140.501333 140.586667A140.928 140.928.0 01140.074667 1024C62.72 1024 0 961.109333.0 883.626667S62.933333 743.082667 140.416 743.04zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667v-199.04c372.352.0 678.784 306.517333 678.784 678.826667z"/></svg>
</a>
</div>
<div class=copyright>
<span class=power-by>
Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a>
</span>
<span class=division>|</span>
<span class=theme-info>
Theme - <a class=theme-link href=https://github.com/xianmin/hugo-theme-jane>Jane</a>
</span>
<span class=copyright-year>
&copy;
2015 -
2022
<span class=heart>
<i class=iconfont><svg class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14"><path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7.0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1.0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2.0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3.1-42.5-8-83.6-24-122.2z" fill="#8a8a8a"/></svg>
</i>
</span><span class=author>
debugtalk
</span></span>
<span id=busuanzi_container>
访客数/访问量：<span id=busuanzi_value_site_uv></span>/<span id=busuanzi_value_site_pv></span>
</span>
</div>
</footer>
<div class=back-to-top id=back-to-top>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35"><path d="M510.866688 227.694839 95.449397 629.218702h235.761562L329.15309 958.01517h362.40389L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777h894.052392v131.813095H63.840492V63.962777zm0 0"/></svg>
</i>
</div>
</div>
<script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script>
<script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script>
<script type=text/javascript src=/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/load-photoswipe.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe.min.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe-ui-default.min.js></script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<script src=/js/custom.js></script>
</body>
</html>