<!doctype html><html lang=zh-cn itemscope itemtype=http://schema.org/WebPage><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>ApiTestEngine 演进之路（4）测试用例中实现 Python 函数的调用 - DebugTalk</title><meta name=renderer content="webkit"><meta name=viewport content="width=device-width,initial-scale=1,user-scalable=yes"><meta name=MobileOptimized content="width"><meta name=HandheldFriendly content="true"><meta name=applicable-device content="pc,mobile"><meta name=theme-color content="#f8f5ec"><meta name=msapplication-navbutton-color content="#f8f5ec"><meta name=apple-mobile-web-app-capable content="yes"><meta name=apple-mobile-web-app-status-bar-style content="#f8f5ec"><meta name=mobile-web-app-capable content="yes"><meta name=author content="debugtalk"><meta name=description content="在《测试用例中实现Python函数的定义》中，介绍了在YAML/JSON测试用例中实现Python函数定义的两种方法，以及它们各自适用的场景"><meta name=keywords content="HttpRunner,Python,Go,博客,debugtalk,接口自动化测试,性能测试"><meta name=generator content="Hugo 0.98.0"><link rel=canonical href=https://debugtalk.com/post/ApiTestEngine-4-call-functions-in-yaml-testcases/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/sass/jane.min.fa4b2b9f31b5c6d0b683db81157a9226e17b06e61911791ab547242a4a0556f2.css integrity="sha256-+ksrnzG1xtC2g9uBFXqSJuF7BuYZEXkatUckKkoFVvI=" media=screen crossorigin=anonymous><link rel=stylesheet href=/css/custom.css><meta property="og:title" content="ApiTestEngine 演进之路（4）测试用例中实现 Python 函数的调用"><meta property="og:description" content="在《测试用例中实现Python函数的定义》中，介绍了在YAML/JSON测试用例中实现Python函数定义的两种方法，以及它们各自适用的场景"><meta property="og:type" content="article"><meta property="og:url" content="https://debugtalk.com/post/ApiTestEngine-4-call-functions-in-yaml-testcases/"><meta property="article:section" content="post"><meta property="article:published_time" content="2017-07-17T00:00:00+00:00"><meta property="article:modified_time" content="2017-07-17T00:00:00+00:00"><meta itemprop=name content="ApiTestEngine 演进之路（4）测试用例中实现 Python 函数的调用"><meta itemprop=description content="在《测试用例中实现Python函数的定义》中，介绍了在YAML/JSON测试用例中实现Python函数定义的两种方法，以及它们各自适用的场景"><meta itemprop=datePublished content="2017-07-17T00:00:00+00:00"><meta itemprop=dateModified content="2017-07-17T00:00:00+00:00"><meta itemprop=wordCount content="3258"><meta itemprop=keywords content="HttpRunner,"><meta name=twitter:card content="summary"><meta name=twitter:title content="ApiTestEngine 演进之路（4）测试用例中实现 Python 函数的调用"><meta name=twitter:description content="在《测试用例中实现Python函数的定义》中，介绍了在YAML/JSON测试用例中实现Python函数定义的两种方法，以及它们各自适用的场景"><!--[if lte IE 9]><script src=https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js></script><![endif]--><!--[if lt IE 9]><script src=https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js></script><![endif]--><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-81639610-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><div id=mobile-navbar class=mobile-navbar><div class=mobile-header-logo><a href=/ class=logo>DebugTalk</a></div><div class=mobile-navbar-icon><span></span>
<span></span>
<span></span></div></div><nav id=mobile-menu class="mobile-menu slideout-menu"><ul class=mobile-menu-list><li class=mobile-menu-item><a class=menu-item-link href=https://debugtalk.com/>主页</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://debugtalk.com/post/>归档</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://debugtalk.com/tags/>标签</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://debugtalk.com/categories/>分类</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://debugtalk.com/about/>关于</a></li><li class=mobile-menu-item><a class=menu-item-link href=https://debugtalk.com/index.xml>订阅</a></li></ul></nav><link rel=stylesheet href=/lib/photoswipe/photoswipe.min.css><link rel=stylesheet href=/lib/photoswipe/default-skin/default-skin.min.css><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><header id=header class="header container"><div class=logo-wrapper><a href=/ class=logo>DebugTalk</a></div><nav class=site-navbar><ul id=menu class=menu><li class=menu-item><a class=menu-item-link href=https://debugtalk.com/>主页</a></li><li class=menu-item><a class=menu-item-link href=https://debugtalk.com/post/>归档</a></li><li class=menu-item><a class=menu-item-link href=https://debugtalk.com/tags/>标签</a></li><li class=menu-item><a class=menu-item-link href=https://debugtalk.com/categories/>分类</a></li><li class=menu-item><a class=menu-item-link href=https://debugtalk.com/about/>关于</a></li><li class=menu-item><a class=menu-item-link href=https://debugtalk.com/index.xml>订阅</a></li></ul></nav></header><div id=mobile-panel><main id=main class="main bg-llight"><div class=content-wrapper><div id=content class="content container"><article class="post bg-white"><header class=post-header><h1 class=post-title>ApiTestEngine 演进之路（4）测试用例中实现 Python 函数的调用</h1><div class=post-meta><time datetime=2017-07-17 class=post-time>2017-07-17</time><div class=post-category><a href=https://debugtalk.com/categories/OpenSource/>OpenSource</a></div><span class=more-meta>约 3258 字</span>
<span class=more-meta>预计阅读 7 分钟</span>
<span id=busuanzi_container_page_pv>| 阅读 <span id=busuanzi_value_page_pv></span></span></div></header><div class=post-toc id=post-toc><h2 class=post-toc-title>文章目录</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#函数的调用形式>函数的调用形式</a></li><li><a href=#正则表达式的妙用>正则表达式的妙用</a></li><li><a href=#实现函数的调用>实现函数的调用</a></li><li><a href=#总结>总结</a></li><li><a href=#相关文章>相关文章</a></li></ul></nav></div></div><div class=post-content><p>在<a href=https://debugtalk.com/post/ApiTestEngine-3-define-functions-in-yaml-testcases/>《测试用例中实现<code>Python</code>函数的定义》</a>中，介绍了在<code>YAML/JSON</code>测试用例中实现<code>Python</code>函数定义的两种方法，以及它们各自适用的场景。</p><p>但是在<code>YAML/JSON</code>文本中要怎样实现函数的调用和传参呢？</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=nt>TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>debugtalk</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=nt>json</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=nt>random</span><span class=p>:</span><span class=w> </span><span class=l>${gen_random_string(5)}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>   </span>- <span class=nt>authorization</span><span class=p>:</span><span class=w> </span><span class=l>${gen_md5($TOKEN, $json, $random)}</span><span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>例如上面的例子（YAML格式），<code>gen_random_string</code>和<code>gen_md5</code>都是已经定义好的函数，但<code>${gen_random_string(5)}</code>和<code>${gen_md5($TOKEN, $json, $random)}</code>终究只是文本字符串，程序是如何将其解析为实际的函数和参数，并实现调用的呢？</p><p>本文将对此进行重点讲解。</p><h2 id=函数的调用形式>函数的调用形式</h2><p>在<code>Python</code>语言中，函数的调用形式包含如下四种形式：</p><ul><li>无参数：func()</li><li>顺序参数：func(a, b)</li><li>字典参数：func(a=1, b=2)</li><li>混合类型参数：func(1, 2, a=3, b=4)</li></ul><p>之前在<a href=https://debugtalk.com/post/ApiTestEngine-2-best-testcase-description/>《探索优雅的测试用例描述方式》</a>中介绍过，我们选择使用<code>${}</code>作为函数转义符，在<code>YAML/JSON</code>用例描述中调用已经定义好的函数。</p><p>于是，以上四种类型的函数定义在<code>YAML/JSON</code>中就会写成如下样子。</p><ul><li>无参数：${func()}</li><li>顺序参数：${func(a, b)}</li><li>字典参数：${func(a=1, b=2)}</li><li>混合类型参数：${func(1, 2, a=3, b=4)}</li></ul><p>还是之前的例子：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl>- <span class=nt>test</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>name</span><span class=p>:</span><span class=w> </span><span class=l>create user which does not exist</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>import_module_functions</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=l>tests.data.custom_functions</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>variables</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>TOKEN</span><span class=p>:</span><span class=w> </span><span class=l>debugtalk</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>json</span><span class=p>:</span><span class=w> </span>{<span class=nt>&#34;name&#34;: &#34;user&#34;, &#34;password&#34;: </span><span class=s2>&#34;123456&#34;</span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>random</span><span class=p>:</span><span class=w> </span><span class=l>${gen_random_string(5)}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- <span class=nt>authorization</span><span class=p>:</span><span class=w> </span><span class=l>${gen_md5($TOKEN, $json, $random)}</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>request</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>url</span><span class=p>:</span><span class=w> </span><span class=l>http://127.0.0.1:5000/api/users/1000</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>method</span><span class=p>:</span><span class=w> </span><span class=l>POST</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>headers</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>Content-Type</span><span class=p>:</span><span class=w> </span><span class=l>application/json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>authorization</span><span class=p>:</span><span class=w> </span><span class=l>$authorization</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>            </span><span class=nt>random</span><span class=p>:</span><span class=w> </span><span class=l>$random</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span><span class=nt>json</span><span class=p>:</span><span class=w> </span><span class=l>$json</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>validators</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- {<span class=nt>&#34;check&#34;: &#34;status_code&#34;, &#34;comparator&#34;: &#34;eq&#34;, &#34;expected&#34;: </span><span class=m>201</span>}<span class=w>
</span></span></span><span class=line><span class=cl><span class=w>        </span>- {<span class=nt>&#34;check&#34;: &#34;content.success&#34;, &#34;comparator&#34;: &#34;eq&#34;, &#34;expected&#34;: </span><span class=kc>true</span>}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><p>在这里面有一个<code>variables</code>模块，之前已经出现过很多次，也一直都没有讲解。但是，本文也不打算进行讲解，该部分内容将在下一篇讲解参数的定义和引用时再详细展开。</p><p>当前我们只需要知道，在该用例描述中，<code>${gen_random_string(5)}</code>和<code>${gen_md5($TOKEN, $json, $random)}</code>均实现了函数的传参和调用，而调用的函数正式之前我们定义的<code>gen_random_string</code>和<code>gen_md5</code>。</p><p>这里应该比较好理解，因为函数调用形式与在<code>Python</code>脚本中完全相同。但难点在于，这些描述在<code>YAML/JSON</code>中都是文本字符串形式，<a href=https://github.com/debugtalk/ApiTestEngine><code>ApiTestEngine</code></a>在加载测试用例的时候，是怎么识别出函数并完成调用的呢？</p><p>具体地，这里可以拆分为三个需求点：</p><ul><li>如何在<code>YAML/JSON</code>文本中识别函数？</li><li>如何将文本字符串的函数拆分为函数名称和参数？</li><li>如何使用函数名称和参数实现对应函数的调用？</li></ul><h2 id=正则表达式的妙用>正则表达式的妙用</h2><p>对于第一个需求点，我们之前已经做好了铺垫，设计了<code>${}</code>作为函数的转义符；而当初之所以这么设计，也是为了在加载测试用例时便于解析识别，因为我们可以通过使用正则表达式，非常准确地将函数从文本格式的测试用例中提取出来。</p><p>既然<code>Python</code>函数的调用形式是确定的，都是<code>函数名(参数)</code>的形式，那么使用正则表达式的分组匹配功能，我们就可以很好地实现函数名称与参数的匹配，也就实现了第二个需求点。</p><p>例如，我们可以采用如下正则表达式，来对<code>YAML/JSON</code>中的每一个值（Value）进行匹配性检查。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>r&#34;^\$\{(\w+)\((.*)\)\}$&#34;
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&gt;&gt;&gt; import re
</span></span><span class=line><span class=cl>&gt;&gt;&gt; <span class=nv>regex</span> <span class=o>=</span> r<span class=s2>&#34;^\$\{(\w+)\((.*)\)\}</span>$<span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; <span class=nv>string</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>func</span><span class=p>(3, 5)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; <span class=nv>matched</span> <span class=o>=</span> re.match<span class=o>(</span>regex, string<span class=o>)</span>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; matched.group<span class=o>(</span>1<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;func&#39;</span>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; matched.group<span class=o>(</span>2<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;3, 5&#39;</span>
</span></span><span class=line><span class=cl>&gt;&gt;&gt;
</span></span><span class=line><span class=cl>&gt;&gt;&gt; <span class=nv>string</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=si>${</span><span class=nv>func</span><span class=p>(a=1, b=2)</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; <span class=nv>matched</span> <span class=o>=</span> re.match<span class=o>(</span>regex, string<span class=o>)</span>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; matched.group<span class=o>(</span>1<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;func&#39;</span>
</span></span><span class=line><span class=cl>&gt;&gt;&gt; matched.group<span class=o>(</span>2<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=s1>&#39;a=1, b=2&#39;</span>
</span></span></code></pre></td></tr></table></div></div><p>可以看出，通过如上正则表达式，如果满足匹配条件，那么<code>matched.group(1)</code>就是函数的名称，<code>matched.group(2)</code>就是函数的参数。</p><p>思路是完全可行的，不过我们在匹配参数部分的时候是采用<code>.*</code>的形式，也就是任意字符匹配，匹配的方式不是很严谨。考虑到正常的函数参数部分可能使用到的字符，我们可以采用如下更严谨的正则表达式。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-fallback data-lang=fallback><span class=line><span class=cl>r&#34;^\$\{(\w+)\(([\$\w =,]*)\)\}$&#34;
</span></span></code></pre></td></tr></table></div></div><p>这里限定了五种可能用到的字符，<code>\w</code>代表任意字母或数字，<code>= ,</code>代表的是等号、空格和逗号，这些都是参数中可能用到的。而<code>\$</code>符号，大家应该还记得，这也是我们设计采用的变量转义符，<code>$var</code>将不再代表的是普遍的字符串，而是<code>var</code>变量的值。</p><p>有了这个基础，实现如下<code>is_functon</code>函数，就可以判断某个字符串是否为函数调用。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>function_regexp</span> <span class=o>=</span> <span class=n>re</span><span class=o>.</span><span class=n>compile</span><span class=p>(</span><span class=sa>r</span><span class=s2>&#34;^\$\{(\w+)\(([\$\w =,]*)\)\}$&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>is_functon</span><span class=p>(</span><span class=n>content</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>matched</span> <span class=o>=</span> <span class=n>function_regexp</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=n>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=kc>True</span> <span class=k>if</span> <span class=n>matched</span> <span class=k>else</span> <span class=kc>False</span>
</span></span></code></pre></td></tr></table></div></div><p>不过这里还有一个问题。通过上面的正则表达式，是可以将函数名称和参数部分拆分开了，但是在参数部分，还没法区分具体的参数类型。</p><p>例如，在前面的例子中，从<code>${func(3, 5)}</code>解析出来的参数为<code>3, 5</code>，从<code>${func(a=1, b=2)}</code>解析出来的参数为<code>a=1, b=2</code>，我们通过肉眼可以识别出这分别对应着顺序参数和字典参数两种类型，但是程序就没法自动识别了，毕竟对于程序来说它们都只是字符串而已。</p><p>所以，这里还需要再做一步操作，就是将参数字符串解析为对程序友好的形式。</p><p>什么叫对程序友好的形式呢？这里就又要用到<a href=https://debugtalk.com/post/ApiTestEngine-3-define-functions-in-yaml-testcases/>上一篇文章</a>讲到的可变参数和关键字参数形式了，也就是<code>func(*args, **kwargs)</code>的形式。</p><p>试想，如果我们可以将所有顺序参数都转换为<code>args</code>列表，将所有字典参数都转换为<code>kwargs</code>字典，那么对于任意函数类型，我们都可以采用<code>func(*args, **kwargs)</code>的调用形式。</p><p>于是，问题就转换为，如何将参数部分转换为<code>args</code>和<code>kwargs</code>两部分。</p><p>这就比较简单了。因为在函数的参数部分，顺序参数必须位于字典参数前面，并且以逗号间隔；而字典参数呢，总是以<code>key=value</code>的形式出现，并且也以逗号间隔。</p><p>那么我们就可以利用参数部分的这个特征，来进行字符串的处理。处理算法如下：</p><ul><li>采用逗号作为分隔符将字符串进行拆分；</li><li>对每一部分进行判断，如果不包含等号，那么就是顺序参数，将其加入（<code>append</code>）到<code>args</code>列表；</li><li>如果包含等号，那么就是字典参数，采用等号作为分隔符进行进一步拆分得到<code>key-value</code>键值对，然后再加入到<code>kwargs</code>字典。</li></ul><p>对应的<code>Python</code>代码实现如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>parse_function</span><span class=p>(</span><span class=n>content</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>function_meta</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;args&#34;</span><span class=p>:</span> <span class=p>[],</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;kwargs&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=n>matched</span> <span class=o>=</span> <span class=n>function_regexp</span><span class=o>.</span><span class=n>match</span><span class=p>(</span><span class=n>content</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>function_meta</span><span class=p>[</span><span class=s2>&#34;func_name&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=n>matched</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>args_str</span> <span class=o>=</span> <span class=n>matched</span><span class=o>.</span><span class=n>group</span><span class=p>(</span><span class=mi>2</span><span class=p>)</span><span class=o>.</span><span class=n>replace</span><span class=p>(</span><span class=s2>&#34; &#34;</span><span class=p>,</span> <span class=s2>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>args_str</span> <span class=o>==</span> <span class=s2>&#34;&#34;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>function_meta</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>args_list</span> <span class=o>=</span> <span class=n>args_str</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;,&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>arg</span> <span class=ow>in</span> <span class=n>args_list</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=s1>&#39;=&#39;</span> <span class=ow>in</span> <span class=n>arg</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=o>=</span> <span class=n>arg</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s1>&#39;=&#39;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>function_meta</span><span class=p>[</span><span class=s2>&#34;kwargs&#34;</span><span class=p>][</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=n>parse_string_value</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>function_meta</span><span class=p>[</span><span class=s2>&#34;args&#34;</span><span class=p>]</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>parse_string_value</span><span class=p>(</span><span class=n>arg</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>function_meta</span>
</span></span></code></pre></td></tr></table></div></div><p>可以看出，通过<code>parse_function</code>函数，可以将一个函数调用的字符串转换为函数的结构体。</p><p>例如，<code>${func(1, 2, a=3, b=4)}</code>字符串，经过<code>parse_function</code>转换后，就可以得到该函数的名称和参数信息：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=err>function_meta</span> <span class=err>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=err>&#39;func_name&#39;:</span> <span class=err>&#39;func&#39;,</span>
</span></span><span class=line><span class=cl>    <span class=err>&#39;args&#39;:</span> <span class=err>[1,</span> <span class=err>2],</span>
</span></span><span class=line><span class=cl>    <span class=err>&#39;kwargs&#39;:</span> <span class=err>{&#39;a&#39;:3,</span> <span class=err>&#39;b&#39;:4</span><span class=p>}</span>
</span></span><span class=line><span class=cl><span class=err>}</span>
</span></span></code></pre></td></tr></table></div></div><p>这也就彻底解决了第二个需求点。</p><h2 id=实现函数的调用>实现函数的调用</h2><p>在此基础上，我们再看第三个需求点，如何使用函数名称和参数实现对应函数的调用，其实也就很简单了。</p><p>在<a href=https://debugtalk.com/post/ApiTestEngine-3-define-functions-in-yaml-testcases/>上一篇文章</a>中，我们实现了对函数的定义，并且将所有定义好的函数都添加到了一个字典当中，假如字典名称为<code>custom_functions_dict</code>，那么根据以上的函数信息（<code>function_meta</code>），就可以采用如下方式进行调用。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=n>func_name</span> <span class=o>=</span> <span class=n>function_meta</span><span class=p>[</span><span class=s1>&#39;func_name&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>args</span> <span class=o>=</span> <span class=n>function_meta</span><span class=p>[</span><span class=s1>&#39;args&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>kwargs</span> <span class=o>=</span> <span class=n>function_meta</span><span class=p>[</span><span class=s1>&#39;kwargs&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>custom_functions_dict</span><span class=p>[</span><span class=n>func_name</span><span class=p>](</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>具体的，在<code>ApiTestEngine</code>中对应的<code>Python</code>代码片段如下：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span><span class=lnt>34
</span><span class=lnt>35
</span><span class=lnt>36
</span><span class=lnt>37
</span><span class=lnt>38
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>get_eval_value</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>   <span class=s2>&#34;&#34;&#34; evaluate data recursively, each variable in data will be evaluated.
</span></span></span><span class=line><span class=cl><span class=s2>   &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>       <span class=k>return</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>get_eval_value</span><span class=p>(</span><span class=n>item</span><span class=p>)</span> <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>data</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=nb>dict</span><span class=p>):</span>
</span></span><span class=line><span class=cl>       <span class=n>evaluated_data</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>       <span class=k>for</span> <span class=n>key</span><span class=p>,</span> <span class=n>value</span> <span class=ow>in</span> <span class=n>data</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>           <span class=n>evaluated_data</span><span class=p>[</span><span class=n>key</span><span class=p>]</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_eval_value</span><span class=p>(</span><span class=n>value</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       <span class=k>return</span> <span class=n>evaluated_data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>data</span><span class=p>,</span> <span class=p>(</span><span class=nb>int</span><span class=p>,</span> <span class=nb>float</span><span class=p>)):</span>
</span></span><span class=line><span class=cl>       <span class=k>return</span> <span class=n>data</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=c1># data is in string format here</span>
</span></span><span class=line><span class=cl>   <span class=n>data</span> <span class=o>=</span> <span class=s2>&#34;&#34;</span> <span class=k>if</span> <span class=n>data</span> <span class=ow>is</span> <span class=kc>None</span> <span class=k>else</span> <span class=n>data</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span>
</span></span><span class=line><span class=cl>   <span class=k>if</span> <span class=n>utils</span><span class=o>.</span><span class=n>is_variable</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>       <span class=c1># variable marker: $var</span>
</span></span><span class=line><span class=cl>       <span class=n>variable_name</span> <span class=o>=</span> <span class=n>utils</span><span class=o>.</span><span class=n>parse_variable</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=n>value</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>testcase_variables_mapping</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=n>variable_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=k>if</span> <span class=n>value</span> <span class=ow>is</span> <span class=kc>None</span><span class=p>:</span>
</span></span><span class=line><span class=cl>           <span class=k>raise</span> <span class=n>exception</span><span class=o>.</span><span class=n>ParamsError</span><span class=p>(</span>
</span></span><span class=line><span class=cl>               <span class=s2>&#34;</span><span class=si>%s</span><span class=s2> is not defined in bind variables!&#34;</span> <span class=o>%</span> <span class=n>variable_name</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=k>return</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>   <span class=k>elif</span> <span class=n>utils</span><span class=o>.</span><span class=n>is_functon</span><span class=p>(</span><span class=n>data</span><span class=p>):</span>
</span></span><span class=line><span class=cl>       <span class=c1># function marker: ${func(1, 2, a=3, b=4)}</span>
</span></span><span class=line><span class=cl>       <span class=n>fuction_meta</span> <span class=o>=</span> <span class=n>utils</span><span class=o>.</span><span class=n>parse_function</span><span class=p>(</span><span class=n>data</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=n>func_name</span> <span class=o>=</span> <span class=n>fuction_meta</span><span class=p>[</span><span class=s1>&#39;func_name&#39;</span><span class=p>]</span>
</span></span><span class=line><span class=cl>       <span class=n>args</span> <span class=o>=</span> <span class=n>fuction_meta</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;args&#39;</span><span class=p>,</span> <span class=p>[])</span>
</span></span><span class=line><span class=cl>       <span class=n>kwargs</span> <span class=o>=</span> <span class=n>fuction_meta</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s1>&#39;kwargs&#39;</span><span class=p>,</span> <span class=p>{})</span>
</span></span><span class=line><span class=cl>       <span class=n>args</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_eval_value</span><span class=p>(</span><span class=n>args</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=n>kwargs</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>get_eval_value</span><span class=p>(</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>       <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>testcase_config</span><span class=p>[</span><span class=s2>&#34;functions&#34;</span><span class=p>][</span><span class=n>func_name</span><span class=p>](</span><span class=o>*</span><span class=n>args</span><span class=p>,</span> <span class=o>**</span><span class=n>kwargs</span><span class=p>)</span>
</span></span><span class=line><span class=cl>   <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>       <span class=k>return</span> <span class=n>data</span>
</span></span></code></pre></td></tr></table></div></div><p>这里还用到了递归的概念，当参数是变量（例如<code>gen_md5($TOKEN, $json, $random)</code>），或者为列表、字典等嵌套类型时，也可以实现正常的解析。</p><h2 id=总结>总结</h2><p>到此为止，我们就解决了测试用例（<code>YAML/JSON</code>）中实现<code>Python</code>函数定义和调用的问题。</p><p>还记得<a href=https://debugtalk.com/post/ApiTestEngine-2-best-testcase-description/>《探索优雅的测试用例描述方式》</a>末尾提到的用例模板引擎技术实现的三大块内容么？</p><ul><li>如何在用例描述（<code>YAML/JSON</code>）中实现函数的定义和调用</li><li>如何在用例描述中实现参数的定义和引用，包括用例内部和用例集之间</li><li>如何在用例描述中实现预期结果的描述和测试结果的校验</li></ul><p>第一块总算是讲完了，下一篇文章将开始讲解如何在用例描述中实现参数的定义和引用的问题。</p><h2 id=相关文章>相关文章</h2><ul><li><a href=https://debugtalk.com/post/ApiTestEngine-2-best-testcase-description/>《ApiTestEngine 演进之路（2）探索优雅的测试用例描述方式》</a></li><li><a href=https://debugtalk.com/post/ApiTestEngine-3-define-functions-in-yaml-testcases/>《ApiTestEngine 演进之路（3）测试用例中实现<code>Python</code>函数的定义》</a></li><li><a href=https://github.com/debugtalk/ApiTestEngine><code>ApiTestEngine</code> GitHub源码</a></li></ul></div><div class=post-copyright><p class=copyright-item><span class=item-title>文章作者</span>
<span class=item-content>debugtalk</span></p><p class=copyright-item><span class=item-title>上次更新</span>
<span class=item-content>2017-07-17</span></p><p class=copyright-item><span class=item-title>许可协议</span>
<span class=item-content><a rel="license noopener" href=https://creativecommons.org/licenses/by-nc-nd/4.0/ target=_blank>CC BY-NC-ND 4.0</a></span></p></div><footer class=post-footer><div class=post-tags><a href=https://debugtalk.com/tags/HttpRunner/>HttpRunner</a></div><nav class=post-nav><a class=prev href=/post/solve-Jenkins-can-not-show-html-css/><i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417l277.93508-310.326815c11.338233-12.190647 11.035334-32.285311-.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"/></svg></i><span class="prev-text nav-default">解决 Jenkins 中无法展示 HTML 样式的问题</span>
<span class="prev-text nav-mobile">上一篇</span></a>
<a class=next href=/post/ApiTestEngine-3-define-functions-in-yaml-testcases/><span class="next-text nav-default">ApiTestEngine 演进之路（3）测试用例中实现 Python 函数的定义</span>
<span class="prev-text nav-mobile">下一篇</span>
<i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18" height="18"><path d="M332.091514 74.487481l-75.369571 89.491197c-10.963703 12.998035-10.285251 32.864502 1.499144 44.378743l286.278095 300.375162L266.565125 819.058374c-11.338233 12.190647-11.035334 32.285311.638543 44.850487l80.46666 86.564541c11.680017 12.583596 30.356378 12.893658 41.662889.716314l377.434212-421.426145c11.332093-12.183484 11.041474-32.266891-.657986-44.844348l-80.46666-86.564541c-1.772366-1.910513-3.706415-3.533476-5.750981-4.877077L373.270379 71.774697c-11.777231-11.500939-30.216186-10.304694-41.178865 2.712784z"/></svg></i></a></nav></footer></article><div class="post bg-white"><script src=https://utteranc.es/client.js repo=debugtalk/debugtalk.github.io issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></div></div></main><footer id=footer class=footer><div class=icon-links><a href=mailto:mail@debugtalk.com rel="me noopener" class=iconfont title=email><svg class="icon" viewBox="0 0 1451 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M664.781909 681.472759.0 97.881301C0 3.997201 71.046997.0 71.046997.0H474.477909 961.649408h399.992405s71.046998 3.997201 71.046998 97.881301L771.345323 681.472759S764.482731 685.154773 753.594283 688.65053V688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858V688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759zm53.281707 130.131124C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633.0 212.052267.0 212.052267V942.809523S0 1024 83.726336 1024H682.532949 753.579947h595.368192C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523V212.052267S893.138176 701.759633 817.019477 767.734955c-39.771477 34.470494-74.671786 43.295855-98.955861 43.868928z"/></svg></a><a href=https://github.com/debugtalk rel="me noopener" class=iconfont title=github target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="36" height="36"><path d="M512 12.672c-282.88.0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667.0-12.16-.426667-44.373333-.64-87.04C242.005334 929.664 211.968 830.08 211.968 830.08 188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333.0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333.0.0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667.0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72.0 68.522667-.64 123.562667-.64 140.202666.0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"/></svg></a><a href=https://debugtalk.com/index.xml rel="noopener alternate" type=application/rss+xml class=iconfont title=rss target=_blank><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="30" height="30"><path d="M819.157333 1024C819.157333 574.592 449.408 204.8.0 204.8V0c561.706667.0 1024 462.293333 1024 1024H819.157333zM140.416 743.04a140.8 140.8.0 01140.501333 140.586667A140.928 140.928.0 01140.074667 1024C62.72 1024 0 961.109333.0 883.626667S62.933333 743.082667 140.416 743.04zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667v-199.04c372.352.0 678.784 306.517333 678.784 678.826667z"/></svg></a></div><div class=copyright><span class=power-by>Powered by <a class=hexo-link href=https://gohugo.io>Hugo</a></span>
<span class=division>|</span>
<span class=theme-info>Theme - <a class=theme-link href=https://github.com/xianmin/hugo-theme-jane>Jane</a></span>
<span class=copyright-year>&copy;
2011 -
2022
<span class=heart><i class=iconfont><svg class="icon" viewBox="0 0 1025 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="14" height="14"><path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7.0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1.0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2.0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3.1-42.5-8-83.6-24-122.2z" fill="#8a8a8a"/></svg></i></span><span class=author>debugtalk</span></span>
<span id=busuanzi_container>访客数/访问量：<span id=busuanzi_value_site_uv></span>/<span id=busuanzi_value_site_pv></span></span></div></footer><div class=back-to-top id=back-to-top><i class=iconfont><svg class="icon" viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="35" height="35"><path d="M510.866688 227.694839 95.449397 629.218702h235.761562L329.15309 958.01517h362.40389L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777h894.052392v131.813095H63.840492V63.962777zm0 0"/></svg></i></div></div><script type=text/javascript src=/lib/jquery/jquery-3.2.1.min.js></script>
<script type=text/javascript src=/lib/slideout/slideout-1.0.1.min.js></script>
<script type=text/javascript src=/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/load-photoswipe.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe.min.js></script>
<script type=text/javascript src=/lib/photoswipe/photoswipe-ui-default.min.js></script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script>
<script src=/js/custom.js></script></body></html>